"use strict";(self.webpackChunkpayangel_api_docs=self.webpackChunkpayangel_api_docs||[]).push([[538],{887:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var c=s(758);const t={},i=c.createContext(t);function r(e){const n=c.useContext(i);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),c.createElement(i.Provider,{value:n},e.children)}},7460:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>a});const c=JSON.parse('{"id":"api/collection/card","title":"Card Collection","description":"This endpoint allows you to initiate collection transactions via debit and credit cards.","source":"@site/docs/api/collection/card.md","sourceDirName":"api/collection","slug":"/api/collection/card","permalink":"/payangel-api-docs/docs/api/collection/card","draft":false,"unlisted":false,"editUrl":"https://github.com/payincgroupltd/payangel-api-docs/tree/main/docs/api/collection/card.md","tags":[],"version":"current","frontMatter":{"id":"card","title":"Card Collection","sidebar_label":"Card"},"sidebar":"apiSidebar","previous":{"title":"Mobile Money","permalink":"/payangel-api-docs/docs/api/collection/mobile-money"},"next":{"title":"Status","permalink":"/payangel-api-docs/docs/api/collection/status"}}');var t=s(6070),i=s(887);const r={id:"card",title:"Card Collection",sidebar_label:"Card"},l="Card Collection",d={},a=[{value:"Request",id:"request",level:2},{value:"Request Headers",id:"request-headers",level:3},{value:"Request Body",id:"request-body",level:3},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Response",id:"response",level:2},{value:"Successful Response",id:"successful-response",level:3},{value:"Error Response",id:"error-response",level:3},{value:"Callback Notifications",id:"callback-notifications",level:2},{value:"Successful Collection Callback",id:"successful-collection-callback",level:3},{value:"Failed Collection Callback",id:"failed-collection-callback",level:3},{value:"Card Collection Flow",id:"card-collection-flow",level:2},{value:"Notes",id:"notes",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"card-collection",children:"Card Collection"})}),"\n",(0,t.jsx)(n.p,{children:"This endpoint allows you to initiate collection transactions via debit and credit cards."}),"\n",(0,t.jsx)(n.h2,{id:"request",children:"Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST /api/v1/middleware/collection\n"})}),"\n",(0,t.jsx)(n.h3,{id:"request-headers",children:"Request Headers"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Header"}),(0,t.jsx)(n.th,{children:"Required"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Authorization"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Bearer token acquired through API authentication"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Content-Type"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsxs)(n.td,{children:["Must be ",(0,t.jsx)(n.code,{children:"application/json"})]})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"request-body",children:"Request Body"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n   "transactionId": "card-txn-100", \n   "country": "GH",\n   "transactionType": "card",\n   "customerAccount": "customer@example.com",\n   "currency": "GHS",\n   "amount": 100.00,\n   "itemDescription": "Product purchase",\n   "redirectUrl": "https://yourbusiness.com/payment/complete"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"request-parameters",children:"Request Parameters"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Parameter"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Required"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"transactionId"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"A unique identifier for the transaction"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"country"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"The country code where the money will be collected from"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"transactionType"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:'Must be "card" for card transactions'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"customerAccount"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"The customer's email address or identifier"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"currency"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:'The transaction currency (e.g., "GHS" for Ghanaian Cedi)'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"amount"})}),(0,t.jsx)(n.td,{children:"number"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"The transaction amount"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"itemDescription"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"Description of the transaction"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"redirectUrl"})}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"URL to redirect the customer after payment completion"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"response",children:"Response"}),"\n",(0,t.jsx)(n.h3,{id:"successful-response",children:"Successful Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "message": "Card collection request initiated successfully",\n  "data": {\n    "transactionId": "card-txn-100",\n    "paymentUrl": "https://pay.payangel.com/checkout/card-txn-100",\n    "expiresAt": "2023-09-15T16:23:45Z"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"error-response",children:"Error Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "code": "INVALID_CURRENCY",\n  "message": "The provided currency is not supported for card transactions"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"callback-notifications",children:"Callback Notifications"}),"\n",(0,t.jsx)(n.p,{children:"PayAngel will send a notification to your configured callback URLs when the card collection is complete. The callback URLs must be configured in the business.payangel.com portal under the Channels/TradeName section."}),"\n",(0,t.jsx)(n.h3,{id:"successful-collection-callback",children:"Successful Collection Callback"}),"\n",(0,t.jsx)(n.p,{children:"When a collection is processed successfully, a callback is sent to the success URL configured in your account:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n   "code": "SUCCESS",     \n   "message": "Collection successful",      \n   "data": {                   \n     "transactionId": "card-txn-100",\n     "walletid": "wallet-id-123",\n     "currency": "GHS",\n     "payment_method": "card",\n     "amount": 100.00,\n     "fees": 2.50,\n     "taxes": 0.50,\n     "transactionDate": "2023-09-15T14:23:45Z",\n     "country": "GH"\n   }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"failed-collection-callback",children:"Failed Collection Callback"}),"\n",(0,t.jsx)(n.p,{children:"When a collection fails, a callback is sent to the failure URL configured in your account:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "code": "FAILED",\n  "message": "Collection failed",\n  "failureReason": "Card declined by issuer",\n  "transactionId": "card-txn-100",\n  "transactionDate": "2023-09-15T14:25:12Z"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"card-collection-flow",children:"Card Collection Flow"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Your system initiates a card collection request"}),"\n",(0,t.jsx)(n.li,{children:"PayAngel returns a payment URL"}),"\n",(0,t.jsx)(n.li,{children:"You redirect the customer to this URL or embed it in your interface"}),"\n",(0,t.jsx)(n.li,{children:"The customer completes the payment with their card details"}),"\n",(0,t.jsx)(n.li,{children:"PayAngel processes the payment and sends a callback notification"}),"\n",(0,t.jsxs)(n.li,{children:["The customer is redirected to your ",(0,t.jsx)(n.code,{children:"redirectUrl"})," (if provided)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Card collections support major credit and debit cards including Visa, Mastercard, and local cards."}),"\n",(0,t.jsx)(n.li,{children:"Payment pages are PCI-DSS compliant and securely hosted by PayAngel."}),"\n",(0,t.jsxs)(n.li,{children:["The payment URL is valid for a limited time as indicated in the ",(0,t.jsx)(n.code,{children:"expiresAt"})," field."]}),"\n",(0,t.jsx)(n.li,{children:"Ensure your success and failure callback URLs are properly configured in the business portal."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);