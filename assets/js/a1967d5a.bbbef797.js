"use strict";(self.webpackChunkpayangel_api_docs=self.webpackChunkpayangel_api_docs||[]).push([[71],{887:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var c=s(758);const i={},l=c.createContext(i);function t(e){const n=c.useContext(l);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),c.createElement(l.Provider,{value:n},e.children)}},4033:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"api/collection/mobile-money","title":"Mobile Money Collection","description":"This endpoint allows you to initiate collection transactions via mobile money services like MTN, Telecel, and AT Ghana.","source":"@site/docs/api/collection/mobile-money.md","sourceDirName":"api/collection","slug":"/api/collection/mobile-money","permalink":"/payangel-api-docs/docs/api/collection/mobile-money","draft":false,"unlisted":false,"editUrl":"https://github.com/payincgroupltd/payangel-api-docs/tree/main/docs/api/collection/mobile-money.md","tags":[],"version":"current","frontMatter":{"id":"mobile-money","title":"Mobile Money Collection","sidebar_label":"Mobile Money"},"sidebar":"apiSidebar","previous":{"title":"Overview","permalink":"/payangel-api-docs/docs/api/collection/overview"},"next":{"title":"Card","permalink":"/payangel-api-docs/docs/api/collection/card"}}');var i=s(6070),l=s(887);const t={id:"mobile-money",title:"Mobile Money Collection",sidebar_label:"Mobile Money"},o="Mobile Money Collection",r={},d=[{value:"Request",id:"request",level:2},{value:"Request Headers",id:"request-headers",level:3},{value:"Request Body",id:"request-body",level:3},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Response",id:"response",level:2},{value:"Successful Response",id:"successful-response",level:3},{value:"Error Response",id:"error-response",level:3},{value:"Callback Notifications",id:"callback-notifications",level:2},{value:"Successful Collection Callback",id:"successful-collection-callback",level:3},{value:"Failed Collection Callback",id:"failed-collection-callback",level:3},{value:"Notes",id:"notes",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"mobile-money-collection",children:"Mobile Money Collection"})}),"\n",(0,i.jsx)(n.p,{children:"This endpoint allows you to initiate collection transactions via mobile money services like MTN, Telecel, and AT Ghana."}),"\n",(0,i.jsx)(n.h2,{id:"request",children:"Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"POST /api/v1/middleware/collection\n"})}),"\n",(0,i.jsx)(n.h3,{id:"request-headers",children:"Request Headers"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Header"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Authorization"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Bearer token acquired through API authentication"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Content-Type"})}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsxs)(n.td,{children:["Must be ",(0,i.jsx)(n.code,{children:"application/json"})]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"request-body",children:"Request Body"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n   "transactionId": "txn-100", \n   "country": "GH",\n   "transactionType": "momo",\n   "customerAccount": "233501234567",\n   "currency": "GHS",\n   "amount": 50.00,\n   "itemDescription": "MOMO Payment"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"request-parameters",children:"Request Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"transactionId"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"A unique identifier for the transaction"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"country"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:'The country code where the money will be collected from (e.g., "GH" for Ghana)'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"transactionType"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:'Must be "momo" for mobile money transactions'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"customerAccount"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"The mobile number of the customer (must include country code)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"currency"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:'The transaction currency (e.g., "GHS" for Ghanaian Cedi)'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"amount"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"The transaction amount"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"itemDescription"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Description of the transaction. This will appear on the user's mobile phone"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"response",children:"Response"}),"\n",(0,i.jsx)(n.h3,{id:"successful-response",children:"Successful Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "success",\n  "message": "Collection request initiated successfully",\n  "data": {\n    "transactionId": "txn-100",\n    "providerReference": "mtn-ref-123456"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"error-response",children:"Error Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "error",\n  "code": "INVALID_ACCOUNT",\n  "message": "Invalid customer account provided"\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"callback-notifications",children:"Callback Notifications"}),"\n",(0,i.jsx)(n.p,{children:"PayAngel will send a notification to your configured callback URLs when the collection is complete. The callback URLs must be configured in the business.payangel.com portal under the Channels/TradeName section."}),"\n",(0,i.jsx)(n.h3,{id:"successful-collection-callback",children:"Successful Collection Callback"}),"\n",(0,i.jsx)(n.p,{children:"When a collection is processed successfully, a callback is sent to the success URL configured in your account:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n   "code": "SUCCESS",     \n   "message": "Collection successful",      \n   "data": {                   \n     "transactionId": "txn-100",\n     "walletid": "wallet-id-123",\n     "currency": "GHS",\n     "payment_method": "momo",\n     "amount": 50.00,\n     "fees": 1.25,\n     "taxes": 0.25,\n     "transactionDate": "2023-09-15T14:23:45Z",\n     "country": "GH"\n   }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"failed-collection-callback",children:"Failed Collection Callback"}),"\n",(0,i.jsx)(n.p,{children:"When a collection fails, a callback is sent to the failure URL configured in your account:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "code": "FAILED",\n  "message": "Collection failed",\n  "failureReason": "User rejected the payment request",\n  "transactionId": "txn-100",\n  "transactionDate": "2023-09-15T14:25:12Z"\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Mobile money collections are only available in supported countries."}),"\n",(0,i.jsx)(n.li,{children:"Ensure that the customer's mobile money account is active and has sufficient funds."}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"customerAccount"}),' must include the country code (e.g., "233" for Ghana).']}),"\n",(0,i.jsx)(n.li,{children:"Transaction descriptions should be clear and concise to help customers identify the payment."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);